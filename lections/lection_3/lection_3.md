ЛЕКЦИЯ 3 Тестирование мобильных приложений Android

План урока

1. Операционная система Android
2. История версий OS Android
3. Устройства с сервисами Google Play и без них
4. Архитектура приложения, её основные компоненты
5. Жизненный цикл Activity
6. Элементы UI
7. Разрешение экрана
8. Утечка памяти в Android и способ её локализации
9. Меню разработчика Android

OS Android — операционная система для смартфонов, планшетов, электронных книг, цифровых проигрывателей, наручных часов, фитнес-браслетов, игровых приставок, ноутбуков, нетбуков, смартбуков, очков Google Glass, телевизоров, проекторов и других устройств. В 2015 году появилась поддержка автомобильных развлекательных систем и бытовых роботов.
Изначально ОС разрабатывала компания Android In – в дальнейшем компанию приобрела Google, сейчас ОС Android принадлежит гуглу.

Андроид основан на ядре Линукс и собственной реализации виртуальной машины Java компании Google. Андроид – ОС с открытым исходным кодом – неизбежно влечет создание альтернативных версий.

«Чистый» Android — это Android без надстроек и лишних фишек. Такую версию ОС сейчас используют смартфоны Google Pixel, а ранее – линейка смартфонов Nexus:

«чистый» Android не только не лидирует, но и не входит даже в первую десятку самых быстрых платформ.

История версий OS Android. Изначально версии хотели именовать именами роботов, но из-за авторских прав с этой идеей возникли проблемы, стали именовать версии андроидов по названиям разных сладостей (имена сладостей – в алфавитном порядке латинского алфавита). Конкурентноспособной ОС стала в 2005г, стало возможно использование на устройствах с сенсорными экранами.

Тестировщику очень важно следить за обновлениями в последней версии, чтобы иметь представление, что разработчики изменили, добавили, и чему с учётом этих изменений стоит уделить особенное внимание.
Следить за актуальными версиями можно на оф сайте разработчиков Андроид в разделе с версиями.

Устройства с сервисами Google Play и без них
Сервисы Google Play отвечают за своевременное обновление приложений и обеспечивают их корректную работу на устройствах Android. Платформа «Сервисы Google Play», по умолчанию установленная на устройствах Android, позволяет интегрировать приложения с сервисами и технологиями Google. Прим: ф-я входа через акк гугл.

Гугл плей и плей маркет – не одно и то же. Сервисы гугл плей нельзя принудительно отключить или удалить. Они почти не расходуют заряд батареи и трафик. Это собирательное название для различных служб – поиск, почта, карты, диск и тп. А также набор системных процессов гугл мобайл сервисез, джей мес, зашитых в ОС Андроид и работают в фоновом режиме, обеспечивая функционирование тех или иных приложений при помощи API.

На рынке есть два типа устройств, работающих с сервисами гугл плей: Google Mobile Services (GMS)
и
без сервисов гугл лей - Huawei Mobile Services (HMS)

Архитектура приложения, её основные компоненты
Архитектура Android-приложений основана на идее многократного использования компонентов — её основных «строительных блоков». Каждый компонент — это отдельная сущность. Он помогает определить общее поведение приложения. Любое приложение может запускать необходимый компонент другого приложения. Создает экземпляры классов, которые необходимы этому компоненту. Прим: работа с камерой.

В отличии от других систем, в системе Андроид приложения не имеют единой точки входа.
Для активации компонента другого приложения необходимо послать сообщение системе о намерении запустить определенный компонент, после чего система его активирует.

4 типа компонентов, каждый тип служит для достижения определенной цели и имеет свой жизненный цикл, который определяет способы создания и разрушения компонента.

Компонент Активность (активити) — это видимая часть приложения (экран, окно, форма), которая отвечает за отображение графического интерфейса пользователя.
Приложение может иметь сразу несколько активностей.

Компонент Сервис — компонент, который работает в фоновом режиме, выполняет длительные по времени операции или работу для удалённых процессов. Не предоставляет пользовательского интерфейса.

Компонент Контент-провайдер управляет распределённым множеством данных приложения. Полезен для чтения и записи приватных.

Компонент Приёмник — компонент, который реагирует на широковещательные извещения. Большинство из них порождается системой – прим: заряд батареи стал низким. Не отображают пользовательский интерфейс, но могут создавать уведомления. Для небольших объемов работ.

Жизненный цикл Activity
onStar()
onResume()
onPause()
onStop()
onRestart()/onDestroy()

onRestart()

onDestroy()

Элементы UI – эл-ты пользовательского интерфейса

Разрешение экрана (не путать с размером экрана)
Познакомиться можно в методичке.

Аварийное завершение работы – краш.

Утечка памяти в Android и способ её локализации
Пользователь находится в приложении менее 10 минут. Прим.: мобильные приложения для покупки билетов, мобильные банки, органайзеры ➔ Пользователь заходит в приложение для достижения конкретной цели ➔ нет острой необходимости тщательно следить за утечками. Мелкие утечки не успеют серьёзно отразиться на работе приложения

Пользователь находится в приложении более 10 минут. Прим.: музыкальные плееры, социальные сети, игры.
Наравне с тестированием необходимо следить за утечками памяти и стабильной работой приложения. Даже небольшая утечка при сессии в 40 минут может отразиться на работе приложения.

Утечка памяти в Android и способ её локализации Android Profiler. Появилась с версии Андроид 3.0.
Показывает процесс и устройство, которое сейчас профилируется.

Меню разработчика Android
Как стать разработчиком ➔ В «Настройках», в разделе «Сведения о ПО» надо тапнуть 7 раз по разделу «Номер сборки» ➔ Далее меню «Для разработчиков» появится в настройках гаджета.

«Оперативная память» отображает среднее потребление оперативной памяти ОС Android и приложениями за последнее время эксплуатации.
«Отчёт об ошибке» может быть интерактивным и подробным. Интерактивный позволяет сделать скриншот, дополнить его сведениями о проблеме и отслеживать статус. Подробный собирает
детальную информацию о системе, охватывающую много параметров. Используется, если смартфон работает плохо, не реагирует на действия или сильно тормозит.
«Не выключать экран» оставляет подсветку экрана постоянно активной, когда устройство заряжается.
«Включить журнал HCI Bluetooth» позволяет сохранять пакеты данных Bluetooth HCI в лог-файл BTSNOOP_HCI.log. Расположение файла различается на разных смартфонах и версиях ОС.
«Работающие приложения» — список запущенных программ и отображение потребления системных ресурсов каждой из них.
«Сервис WebView» — этот раздел позволяет выбрать движок для обработки веб-страниц приложениями, не имеющими штатных функций браузера. Полезная функция, чтобы проверить
взаимодействие приложения с различными движками.
«Демонстрационный режим» — при активации этого параметра всегда отображается полный заряд и замирает время. Полезно, если вы часто делаете скриншоты или записи с рабочего стола.
«Отладка по USB» — включение/выключение поддержки отладки с компьютера. Этот параметр надо активировать при подключении устройства к Android Studio.
«Отозвать доступ» позволяет запретить вмешательство в работу системы компьютерам, с которых ранее осуществлялась отладка.
«Выбрать приложение для фиктивных местоположений» — этот пункт отвечает за выбор приложения, осуществляющего передачу ложных координат местоположения (Fake GPS).
«Визуальный отклик» показывает точки касания пальца. Так проверяется корректность работы сенсора. Полезная функция при записи видео.
«Отображать касания» — то же самое, но в виде пунктирных линий, а не
точек.
Раздел «Отрисовка» — набор настроек, отвечающих за интерфейс.
«Показывать обновления поверхности» показывает обновляемые элементы интерфейса с помощью мерцаний.
«Показывать границы элементов» отображает границы элементов
интерфейса. Используется при тестировании вёрстки.
«Отразить интерфейс» принудительно располагает переключатели, ползунки и галочки справа, текст выравнивает по левому краю (на арабский манер).
«Анимация окон» — скорость анимации в окнах приложений.
«Анимация переходов» — скорость анимации при переключении между
Раздел «Приложения» отвечает за работу с приложениями.
«Вытеснение фоновых Activity» удаляет данные приложений после их
завершения.
Лимит фоновых процессов ограничивает количество процессов, одновременно активных в фоновом режиме.
О пунктах «Вытеснение фоновых Activity» и «Лимит фоновых процессов» надо помнить постоянно. Наибольшая вероятность поймать аварийное завершение работы — именно здесь!
