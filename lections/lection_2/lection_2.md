ЛЕКЦИЯ 2 Особенности тестирования мобильных приложений

Все виды тестирования моб прил:

1. Функциональное тестирование
2. Тестирование совместимости
3. Тестирование безопасности
4. Тестирование локализации и глобализации
5. Тестирование удобства использования
6. Стрессовое тестирование
7. Кросс-платформенное тестирование
8. Тестирование производительности
9. Bundle ID
10. Основные жесты при работе с сенсорными экранами
    +. инсталяционное тестирование (тестирование установки)

Верхнеуровневый чек-лист тестирования моб. прил. (8 пунктов):

1. Функциональное тестирование.
2. Тестирование совместимости.
3. Тестирование безопасности.
4. Тестирование локализации и глобализации.
5. Тестирование удобства использования.
6. Стрессовое тестирование.
7. Кросс-платформенное тестирование.
8. Тестирование производительности.

## Функциональное тестирование - проверка логики работы программы, функциональных требований, упомянутой в документации по разработке, правильности работы прил-я (поведение кнопок, переходы между экранами, работа фильтров и тп.), а именно:

- Тестирование уведомлений
- Тестирование deeplink
- Тестирование push-уведомлений
- Тестирование рекламы
- Тестирование смены ориентации экрана

### Тестирование уведомлений

Различные механизмы ОС для отображения уведомлений. ОС может задерживать или не отображать уведомления для _оптимизации энергопотребления_.

**Чек-лист тестирования уведомлений**:

- Правильная обработка уведомлений, полученных во время работы приложения на переднем плане/в фоновом режиме, _особенно при низком уровне заряда батареи_;
- Если уведомления позволяют напрямую взаимодействовать с контентом приложения (без открытия самого приложения), позже должно быть обеспечено взаимодействие пользователя с приложением – доступ к ответу в приложении;
- Если уведомления предоставляют доступ к приложению (и содержит глубокую ссылку), то вместо главного экрана должна открываться соответствующая страница.

3 типа уведомлений:

1. **Audio** — после получения уведомления проигрывается звуковой сигнал.
2. **Audio/Banners** — вместе со звуковым сигналом отображается баннер. Чтобы просмотреть уведомления, надо опустить «шторку».
3. **Badges** — на рабочем столе отображается цифра в кружочке на иконке приложения или уникальный символ возле иконки приложения.

### Тестирование DEEPLINK — универсальная трекинг-ссылка, которая включает **URL** на разные платформы и _автоматически перенаправляет пользователя на соответствующий его платформе целевой URL_.

3 вида deeplink:

1. **Обычные (регулярные) глубокие ссылки**
   Отправляет на соответствующую целевую страницу в приложении.
   Если приложение не загружено на смартфон - в стор на страницу приложения или сайт компании.

2. **Отложенные глубокие ссылки**
   Сначала - в магазин приложений, а после загрузки - на заданный экран.

3. **Умные глубокие ссылки**
   Универсальные трекинг-ссылки содержат в себе сразу несколько URL для разных платформ. Умная ссылка автоматически перенаправит пользователя на подходящий URL и доведёт до целевой страницы,с каким бы устройством и через какой канал он бы не пришел. Сочетает поведение предыдущих двух видов диплинков.

При тестировании диплинков следует помнить о:

- Приложение установлено/не установлено — проверяем сценарии перехода в маркетплейс/сразу в приложение.
- Пользователь новый/старый — диплинк должен работать для обоих типов пользователей.
- Куда ведёт ссылка? Это товар, подборка, фильтры или что-то иное.
- Платформа: ios/android/web — например, проверить куда будет вести диплинк, предназначенный для платформы Android на другой платформе и тп.

## Тестирование push

**Push-уведомления** — сообщения, отправляемые приложением на мобильное устройство клиента. Об обновленях продуктов, напоминаниях, персонализированных предложений, последних новостей и любой информации, которая считается неотделимой частью функциональности приложения и требует пристального внимания или быстрых действий.

### Цели push-уведомлений:

- вовлечение пользователей;
- удержание;
- формирование лояльности;
- стимуляция продаж;
- информирование.

### Принцип работы push-уведомлений:

- пользователь устанавливает приложение на устройство;
- выдаётся запрос прав на отправку уведомлений, и в случае успеха — ОС получает _токен (идентификатор устройства)_ у службы push-уведомлений;
- ОС передаёт токен на сервер для подключения к уведомлениям;
- сервер шлёт уведомления при наступлении определённого события.

Вид push-уведомлений:

- Экран блокировки
- Центр уведомлений
- Баннер

## Разница между push-уведомлениями в iOS и Android

_IOS_ основана на модели **push Opt-in**, которая _не позволяет брендам отправлять мобильные push-уведомления_ пользователям своих приложений до тех пор, пока эти пользователи не согласятся их получать.

_Android_, с другой стороны, _автоматически разрешает пользователям получать pushуведомления_ с возможностью отказаться от них вручную.

## Типы мобильных уведомлений

- **Информационные** — информация об обновлениях, предупреждения, напоминания, передача событий.
- **Геолокационные** - запускаются когда клиент входит/выходит из опред областей:
- информирование о местных мероприятиях и акциях;
- поиск доступных ресторанов в этом районе;
- прогноз погоды;
- аренда или выезд за пределы зоны аренды на каршеринге
  и прочее.

- **Повторное вовлечение** - "догоняющие" уведомления - для мотивирования клиентов к достижению личных целей и поощрения использования приложений.

- **Периодические уведомления** - запускаются в определённое время и день.

- **Уведомления об опросах** - для сбора отзывов пользователей, улучшения взаимодействия с ними.

## Кейсы проверок:

**Не приходят push-уведомления**
Проверить активацию в меню устройства соответствующих функций: _разрешены уведомления для конкретного приложения_, _не включён режим «Не беспокоить»_.
Перезагрузить устройство и авторизоваться в приложении заново.
Проверить стиль уведомления на устройстве - баннер/предупреждение.

**Переходы по push-уведомлению**
Проверить 2 сценария:
пользователь может быть авторизован/не авторизован.

- переход по push-уведомлению с заблокированного экрана;
- переход по push-уведомлению из центра уведомлений (из «шторки»);
- пользователь находится в приложении;
- переход по push-уведомлению при свёрнутом приложении;
- пользователь разлогинился после получения push;
- переход по push-уведомлению с включенным «Don't keep Activities» (характерно для Android-приложений)

- Переходы по push-уведомлению на опред экран с выбором определённых фильтров. Проверить: при переходе - правильный экран, заданные характеристики в пуш применяются на этом экране.
- Если пуш на поисковой запрос, проверьте, что текст поискового запроса отображается в строке поиска и выдача товаров соответствует поиску. Также могут передаваться определённые фильтры, в
  таком случае нужно проверить, что выбраны все «зашитые» фильтры.
- Если push-уведомление ведёт на WebView (это компонент платформы Android, который позволяет встраивать web-страницы в Android-приложения), проверьте, что WebView открывается корректно на обеих платформах и что в push зашит корректный URL.

**Устаревший push-токен**
У устройства изменился push-токен, когда восстановили приложение из резервной копии системы и не передался новый push-токен.

**Очередь со стороны Apple**
В Apple большая очередь на отправку push-уведомлений, они приходят с задержкой — Apple не гарантирует доставку push.

**Проверка макс и мин кол-ва отображаемых символов**
В iOS и Android _разный_ лимит отображаемых символов.
Макс значение кол-ва символов для _iOS — 4 строки (178
символов)_, для _Android — не более 13 строк (663 символа)_.
Проверить push-уведомление, содержащее мин кол-во символов, _для обеих платформ можно задать 1 символ_.

**Кастомный звук для push-уведомления**
Если звук push-уведомления задан кастомный - проверять и звуковое сопровождение нотификации.

**Изображения в push-уведомлениях**
При отправке такого пуша клиент получает ссылку на изображение и перед показом загружает его, далее происходит процесс обогащения пуша картинкой — она устанавливается. Уведомление отображается после загрузки картинки.
Если push-уведомление содержит картинку, надо проверить, что она отображается.

**Локальные push-уведомления**
Планируются самим приложением, служат для своевременного информирования пользователей, пока приложение не работает на переднем плане.

**Проблемы на серверной стороне**
В другие приложения приходят push-уведомления, в наше - нет, хотя push-токен отправлен на сервер. Стоит проверить корректность отправки push на другие аккаунты сервиса и другие устройства. При отсутствии push-уведомлений сообщите команде серверной разработки.

## Тестирование рекламы

Реклама в моб прил на сегодняшний день - один из самых доходных форматов.
Позволяет охватить постоянно растущую аудиторию пользователей
смартфонов и планшетов. Больше пользователей - больше денег с рекламы можно получить.

### Виды рекламы в моб прил - 4 формата:

- баннеры;
- нативная реклама;
- rewarded video;
- playable ads - интерактивное объявление с элементами геймплея;
- interstitial.

**Баннеры** - самый популярный вид рекламы. Отображаются по такому же принципу, как и баннеры на сайтах. Обычно их фиксируют вверху/внизу страницы, по бокам, бывают горизонтальные и вертикальные. Можно закрыть/свернуть - чтобы не раздражали пользователей.

Виды баннеров:

1. _Адаптивные баннеры_ — автоматически подбирается наиболее подходящий размер рекламного места (пространства, зарезервированного для креативов) при показе на различных устройствах.

2. _Смарт-баннеры_ - полностью заполняют экран по ширине на различных устройствах, сохраняя высоту неизменной. Не такие гибкие и эффективные, как адаптивные баннеры.

3. _Стандартные баннеры_ занимают только выделенное для них пространство. Показываются только те объявления, которые соответствуют указанному размеру.

Основные эл-ты баннера:

1. Обязательный элемент — сама реклама - обычно в формате HTML.
2. URL — адрес, который зашит и по которому будет перенаправление в случае клика по баннеру.
3. Ad choices — элемент, позволяющий пользователю выбрать действие — например, скрыть рекламный контент или посмотреть подробнее о рекламодателе.
4. Аналитика — самый важный - на любое нажатие, скрытие, показ должны отправляться ивенты.

**Нативная реклама**

Ненавязчивый и оптимальный вид рекламы. Получает больше просмотров и репостов, чем другие форматы рекламного контента.

- Чаще всего пользователи, взаимодействуют с контентом, даже не подозревая, что это реклама.
- Если объявления соответствуют контексту страницы, CTR может достигать 50%.
- Например, на экране с объявлениями рекламный контент будет смотреться как обычный товар, а на экране с сообщениями — «маскироваться» под новое сообщение.

На какие эл-ты обращаем внимание при тестировании нативной рекламы:

1. Ad choices — элемент, позволяющий пользователю выбрать действие, например, скрыть рекламный контент.
2. Заголовок.
3. Описание — основной текст рекламного блока.
4. Обязательный элемент — сама реклама - картинка/видео.
5. Call To Action (CTA) — кнопка, которая перенаправляет пользователя на сайт либо в маркетплейс. В неё зашит сам URL редиректа.
6. Реклама — отображает владельца рекламного объявления, подтверждает, что это реклама и указано возрастное ограничение.
7. Аналитика.

**Rewarded Video** — полноэкранная видеореклама, позволяет пользователю получить после её просмотра вознаграждение (бонусы, ачивки в играх и проч), что побуждает его открыть рекламу и потратить время (до 30 сек) на просмотр видеоконтента. Начисление приза - обязательное условие для такой рекламы.

**Playable ads** - По видео/скриншотам из игры трудно понять, насколько будет интересно приложение. Формат Playable Ads позволяет _протестировать игру в ленте соцсети_ - познакомиться с продуктом ДО установки, увеличивает ее вероятность и дальнейших событий в приложении.

**Interstitial** — полноэкранная реклама, кот. появляется, когда пользователь пытается закрыть/переключить экран. Изображения, видеоролики, анимация.

2 вида:

- _Video Interstitial_ — креатив, который можно пропустить/закрыть через N времени, нажав на крестик.
- _Rich Interstitial_ — нельзя пропустить/закрыть.

## Основные кейсы при тестировании рекламы

- Отображение рекламного креатива — вёрстка на разных разрешениях экранов, наполнение.
- Скрытие рекламного контента — вёрстка не ломается, если функционал скрытия реализован.
- Ad choices - правильно ли отображается и выбор действий.
- Проверка переходов по рекламному креативу.
- Возврат обратно в приложение с рекламируемого сайта/маркетплейса.
- Отображение конкретного контента, исходя из настроек в админке рекламного медиатора.
- Аналитика: проверка отправки событий на показ рекламы, переход на рекламный креатив, скрытие рекламы.
- Кейсы с отключённым соединением с интернетом.

**Кейсы для рекламных баннеров**

1. Проверяем адаптацию баннера к разным разрешениям экранов.
2. Отображение через N ячеек контента приложения.

**Кейсы для нативной рекламы**

1. Обновление рекламного контента при p2r (pull to refresh — потянуть, чтобы обновить).
2. Вёрстка рекламного блока.
3. Не отображается ли пустота, если не пришла реклама.

**Кейсы для Rewarded Video**

1. Открывается просмотр видеоконтента.
2. Получение вознаграждения после просмотра рекламного креатива.
3. Отображение таймера с оставшимся временем до конца просмотра видео.
4. Отображение и работа кнопки «Закрыть» по истечении таймера.
5. Если пользователь закрывает видео раньше, он не должен получить вознаграждение.
6. Проверить аудиосопровождение.
7. Возможность отключить звук.
8. Проверить, что нет звука, если включен беззвучный режим.
9. Получение вознаграждения не более N количества раз, если такой
   функционал реализован.
10. Свернуть/развернуть приложение во время просмотра рекламы.

**Кейсы для Interstitial**

1. Открывается просмотр видеоконтента.
2. Отображение таймера с оставшимся временем до конца просмотра видео.
3. Отображение кнопки «Закрыть» по истечении таймера.
4. Проверить аудиосопровождение.
5. Возможность отключить звук.
6. Свернуть/развернуть приложение во время просмотра рекламы.

**Кейсы для Playable Ads**

1. Проверить отображение значка игрового контроллера и призыва к действию «Попробуйте сыграть» поверх видео.
2. Воспроизведение видео.
3. При клике на кнопку открывается полноэкранный режим.
4. Отображение демоверсии.
5. Переход в App Store или Google Play для установки приложения.
6. Свернуть/развернуть приложение во время просмотра рекламы.

## Тестирование смены ориентации экрана (альбомная-портретная)

1. Приложение практично, правильно функционирует при переключении на портретный/альбомный режим.
2. Приложение остаётся в том же состоянии.
3. Поля ввода данных сохраняют собранные/введенные данные.
4. Поля вывода данных отображаются те же данные, сохраняется текущий сеанс.

## Тестирование совместимости

Приложение совместимо со сторонними сервисами, аппаратным обеспечением устройства.

Основные проверяемые кейсы:

1. Приложение работает должным образом по отношению к каждому из доступных датчиков.
2. Функции, реагирующие на внешнее освещение, ведут себя должным образом при различных условиях освещения.
3. Датчики ввода и вывода звуковых данных реагируют правильно в совокупности с виртуальными и физическими кнопками регулировки громкости, микрофоном, проводными и беспроводными динамиками при различных условиях внешнего шума.
4. Местоположение определяется точно.

## Тестирование безопасности

- Тестирование разрешений (доступ к камере/микрофону/галерее и тд),
- Как передаются данные пользователя (пароли), где приложение хранит данные.

**Основные проблемы безопасности для моб прил:**

1. Доступ к конфиденциальным данным на устройстве.
2. Передача незашифрованной информации/небезопасное хранение.

Тестирование прав доступа проверяет следующее:

1. Приложение может работать с ограниченными разрешениями.
2. Приложение запрашивает разрешения только для ресурсов, имеющих отношение к функциональности приложения. Расширенные разрешения для не связанных с приложением ресурсов не допускаются.
3. Приложение функционирует правильно, если разрешение отозвано или отклонено во время установки.
4. Все запросы на разрешения от приложения правильные и обоснованные.

Для тестирования прав доступа нужно знать, зачем приложению требуется каждое разрешение, как отзыв разрешения/ его отклонение во время установки может повлиять на функциональность приложения.

Тесты должны быть разработаны для _проверки отклонения разрешений во время установки и предоставления разрешений после установки_.
Предоставление разрешений настраивается индивидуально для каждого
приложения. Для этого на iOS и Android предусмотрен раздел с правами и разрешениями в меню «Настройки».

## Тестирование локализации и глобализации

Тестирование приложения для различных местоположений, форматов дат, чисел, валют и тд.

Проверять локализованные строки, изображения, рабочие процессы для определённого региона. Например, русские и немецкие слова могут быть намного длиннее слов на других языках. Поскольку у мобильных устройств разные размеры и разрешения экранов, переведённые строки могут вызвать проблемы.
Проверять формат даты: в некоторых странах принят формат год-месяц-день, в других - день-месяц-год.

## Тестирование удобства использования

Простота, эффективность использования продукта пользователем для достижения им поставленных целей. То есть - тестирование дружелюбности приложения для пользователя:

- понятный интерфейс — пользователь должен понимать, на каком экране находится;
- на заголовки экранов — иногда заголовок экрана не соответствует контенту;
- наличие подсказок в полях;
- переходы между экранами;
- нажатие на кнопки и тд.

## Стрессовое тестирование

Определение эффективности производительности приложения в условиях повышенной нагрузки.
Стресс-тест в этом контексте ориентирован только на мобильные устройства.

1. Высокая загрузка центрального процессора.
2. Нехватка памяти.
3. Нехватка места на диске.
4. Загрузка батареи.
5. Отказы.
6. Низкая пропускная способность сети.
7. Большое число взаимодействий пользователя с приложением. Для этого может понадобиться имитация реальных условий состояния сети.

## Кросс-платформенное тестирование

- Определить чёткие границы для кроссплатформенного тестирования. Выделить наиболее важные платформы, которые будут использовать реальные пользователи.
- Тестовая матрица. Матрица всегда полезна, когда речь идёт о разработке тестовых сценариев. Подготовьте тестовую матрицу, используйте её для выполнения тестовых случаев и для связи с конечными пользователями.
- Тепловые карты. Выделите элементы, которые имеют высокий риск в тестовой матрице. Тепловая карта может быть полезна для идеального определения зон риска. Помогает в правильной расстановке приоритетов, когда время и ресурсы ограничены.

## Тестирование производительности

Определить, как быстро работает приложение/его часть под определённой нагрузкой. Должно содержать хронометрические данные для наиболее важных рабочих процессов.

## Получение уникального идентификатора приложения (Bundle ID)

**Bundle ID** — идентификатор приложения. Используется для работы с приложениями в эмуляторах, симуляторах и для рекламных кампаний.

**iOS Bundle ID/ID пакета**
Узнать можно 2-мя способами:
Для **собственных приложений**:

1. Откройте AppStore Connect, перейдите к My Apps и выберите приложение, идентификатор которого хотите получить.
2. Перейдите в раздел «Общая информация» → «Информация о приложении»:

Для **сторонних приложений**:

1. Найдите приложение в App Store, перейдите на его страницу (например, на страницу Юлы).
2. Скопируйте числовой идентификатор, который указан в URL между id и ? (в примере — 1016489154).
3. Вставьте идентификатор в URL https://itunes.apple.com/lookup?id= после знака = (https://itunes.apple.com/lookup?id=1016489154).
4. В файле 1.txt, который браузер скачает по этому URL, найдите текст bundleId.
   Идентификатор приложения Юла для iPhone — com.allgoritm.Youla.

**Android Bundle ID**
Узнать можно также 2-мя способами:

Для _собственных приложений_:

1. Откройте Консоль разработчика Google Play, выберите приложение, идентификатор которого хотите получить.
2. Идентификатор указан рядом с логотипом и названием приложения.

Для *сторонних приложени*й:

1. Найдите приложение в Google Play, перейдите на его страницу (например, на страницу «Юлы»). Идентификатор приложения указан в URL после ? id=.
2. Идентификатор приложения Юла для Android — com.allgoritm.youla:

## Основные жесты при работе с сенсорными экранами

- Tap - нажатие
- Swipe — свайп (смахивание) вверх/вниз/вправо/влево
- Press and Hold — нажать и удерживать.
- Drag - нажать
- Pinch — щипок (сведение) двумя пальцами.
- Spread — растянуть (развести) двумя пальцами.
- Rotate - повернуть
- Touch - нажать

Дополнительные материалы

1. Bundle IDs | Apple Developer Documentation [https://developer.apple.com/documentation/appstoreconnectapi/bundle_ids]
2. Монетизация мобильного приложения с помощью рекламы | GeekBrains - образовательный портал [https://gb.ru/posts/mobile_app_ads]
3. Push-уведомления: какие бывают и как помогают бизнесу — Маркетинг на vc.ru [https://vc.ru/marketing/313565-push-uvedomleniya-kakie-byvayut-i-kak-pomogayut-biznesu]
